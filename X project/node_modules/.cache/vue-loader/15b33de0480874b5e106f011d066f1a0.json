{"remainingRequest":"c:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\web\\Desktop\\我的项目\\X project\\src\\components\\shop\\shopcart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"c:\\Users\\web\\Desktop\\我的项目\\X project\\src\\components\\shop\\shopcart.vue","mtime":1543405199664},{"path":"c:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mui-icon-redo:before{\n    position: absolute;\n    top: 0;\n    right: 0;\n    color: #333;\n}\n.mint-radiolist-title{\n    font-size: 15px;\n}\n.my-shopcart .mint-button{\n    border-radius: 0;\n}\n.my-shopcart .mui-table-view-cell{\n    padding: 0 10px 0 0;\n}\n.my-shopcart .mui-table-view .mui-media-object{\n    max-width: 100px;\n    height: 90px;\n}\n.my-shopcart .mui-input-group .mui-input-row{\n    height:auto;\n}\n.my-shopcart .mui-checkbox input[type='checkbox']:before{\n    line-height:112px;\n}\n.all{\n    opacity:0.8;\n}\n.my-shopcart .bl{\n    background:#333;\n}\n.my-shopcart .mint-tabbar > .mint-tab-item.is-selected{\n    color:#fff;\n    background:#333;\n}\n.my-shopcart .mint-header{\n    background: #fff;\n    height:45px;\n}\n.my-shopcart .mint-header-button > a , .my-shopcart .mintui-back:before{\n    font-size:28px;\n    color:#ddd;\n}\n.my-shopcart .mint-header-title{\n    color:#000;\n    font-size:15px;\n}\n.null{\n    position:absolute;\n    top:0;\n    left:0;\n    right:0;\n    bottom:0;\n    margin:auto;\n    display: block;\n}\n.mint-popup w-100 mint-popup-bottom{\n    z-index:1100;\n}\n",{"version":3,"sources":["shopcart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shopcart.vue","sourceRoot":"src\\components\\shop","sourcesContent":["<template>\r\n    <div class=\"my-shopcart\">\r\n        <mt-header title=\"购物车\" fixed>\r\n            <a @click.stop=\"back()\" slot=\"left\">\r\n                <mt-button icon=\"back\"></mt-button>\r\n            </a>\r\n            <a @click.stop=\"delblo()\" class=\"mui-icon mui-icon-trash\" slot=\"right\"></a>\r\n        </mt-header>\r\n        <div class=\"mui-card\">\r\n            <form class=\"mui-input-group\">\r\n                <div class=\"mui-input-row mui-checkbox mui-left\" v-for=\"(item,i) in shop\" :key=\"item.id\">\r\n                    <a class=\"mui-icon mui-icon-redo\" @click.stop=\"shopinfo(item.cid)\"></a>\r\n                    <label>\r\n                        <input name=\"checkbox\" :value=\"item\" v-model=\"sum\" type=\"checkbox\">\r\n                        <ul class=\"mui-table-view\">\r\n                            <li class=\"mui-table-view-cell mui-media\">\r\n                                <img class=\"mui-media-object mui-pull-left\" :src=\"item.img\">\r\n                                <div class=\"mui-media-body\">\r\n                                    <div style=\"margin-bottom:5px; overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;\">\r\n                                    {{item.title}}</div>\r\n                                    <p class=\"d-flex\" style=\"justify-content:space-between; margin-bottom:5px;\">\r\n                                        <b style=\"color:red;\">￥{{item.price.toFixed(2)}}</b>\r\n                                        <span>{{item.color}}</span>\r\n                                        <span>{{item.size}}</span>\r\n                                    </p>\r\n                                    <div class=\"mui-numbox w-100\" style=\"margin:0;\">\r\n                                        <button class=\"mui-btn mui-btn-numbox-minus\" type=\"button\" @click=\"minus(i)\">-</button>\r\n                                        <input class=\"mui-input-numbox\" type=\"number\" v-model=\"item.count\" disabled/>\r\n                                        <button class=\"mui-btn mui-btn-numbox-plus\" type=\"button\" @click=\"add(i)\">+</button>\r\n                                    </div>\r\n                                </div>\r\n\t\t\t\t            </li>\r\n                        </ul>\r\n                    </label> \r\n                </div>         \r\n            </form>\r\n        </div>\r\n        <img src=\"http://127.0.0.1:1674/img/shopcart/shopCart_null.png\" v-if=\"this.shop.length==0\" class=\"w-50 null\"/>\r\n        <mt-tabbar fixed style=\"height:50px;\">\r\n            <mt-button @click=\"all()\" :class=\"allclass\" class=\"mui-col-xs-4 mui-col-sm-4 h-100\" style=\"background: #333; color:#fff; line-height: 50px; font-size:large;\">\r\n                全选\r\n            </mt-button>\r\n            <div class=\"mui-col-xs-4 mui-col-sm-4\" style=\"background: #333; color:#fff; line-height: 50px; font-size:80%;\">\r\n                共计：<b>￥{{he.toFixed(2)}}</b>\r\n            </div>\r\n            <div @click=\"pay()\" class=\"mui-col-xs-4 mui-col-sm-4\" style=\"background: red; color:#fff; line-height: 50px; font-size:large;\">\r\n                <b>结 算</b>\r\n            </div>\r\n            <mt-popup v-model=\"popupVisible\" position=\"bottom\" class=\"w-100\">\r\n                <div style=\"background:#fff; padding:10px;\" class=\"w-100\">\r\n                    支付￥{{he.toFixed(2)}}元\r\n                </div>\r\n                <mt-radio title=\"请选择支付方式\"\r\n                :options=paya v-model=\"payr\" style=\"text-align:left;\">\r\n                </mt-radio>\r\n                <mt-button size=\"large\" style=\"background:#00FF00; color:#fff;\" @click=\"payM()\">\r\n                    <b>支 付</b>\r\n                </mt-button>\r\n            </mt-popup>\r\n        </mt-tabbar>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { MessageBox } from 'mint-ui'\r\n    import {Toast} from \"mint-ui\"\r\n    export default({\r\n        data(){\r\n            return {\r\n                check:true,\r\n                cart:\"null\",\r\n                allclass:\"\",\r\n                nh:\"have\",\r\n                shop:[],\r\n                sum:[],\r\n                he:0,\r\n                popupVisible:false,\r\n                paya:[\"支付宝\",\"微信\",\"银行卡\"],\r\n                payr:\"支付宝\"\r\n            }\r\n        },\r\n        methods:{\r\n            payM(){\r\n                var i=this.sum.length\r\n                 if(i>0){\r\n                     MessageBox.confirm('', {message: '你确定要支付？',title: '提示', confirmButtonText: '确定', cancelButtonText: '取消'}).then(action => { \r\n                         if (action == 'confirm') {\r\n                            MessageBox.prompt('请输入支付密码！',{inputValidator: (val) => {\r\n                                if (val === null) {\r\n                                return true;\r\n                                }\r\n                                return !(val.length < 6 || val.length > 18)\r\n                                }, inputErrorMessage: '密码长度必须在6~18位'\r\n                                }).then(({ value, action }) => {\r\n                                Toast(\"支付成功\")\r\n                                for(var key in this.sum){\r\n                                    var img=this.sum[key].img\r\n                                    var size=this.sum[key].size\r\n                                    this.$http.post('delshop',{img:img,size:size}).then(result=>{\r\n                                        i--\r\n                                        if(i==0){\r\n                                            this.popupVisible=false;\r\n                                            this.getshop()\r\n                                            this.allclass=\"\";\r\n                                            this.sum=[]\r\n                                        }\r\n                                    }) \r\n                                }\r\n                            }).catch(err => { \r\n                                 if (err == 'cancel') {\r\n                                    this.popupVisible=false;\r\n                                 } \r\n                            });\r\n                        }\r\n                     }).catch(err => { \r\n                         if (err == 'cancel') {\r\n                             this.popupVisible=false;\r\n                             Toast(\"取消支付\")\r\n                         } \r\n                     });\r\n                 }\r\n            },\r\n            shopinfo(cid){\r\n                this.$router.push('/index/shoplists/shopinfo?id='+cid)\r\n            },\r\n            pay(){\r\n                if(this.he>0){\r\n                    this.popupVisible=true\r\n                }else{\r\n                    Toast(\"请选择购买商品\")\r\n                }\r\n            },\r\n            delblo(){\r\n                 var i=this.sum.length\r\n                 if(i>0){\r\n                     MessageBox.confirm('', {message: '你确定要删除？',title: '提示', confirmButtonText: '确定', cancelButtonText: '取消'}).then(action => { \r\n                         if (action == 'confirm') {\r\n                            for(var key in this.sum){\r\n                                var img=this.sum[key].img\r\n                                var size=this.sum[key].size\r\n                                this.$http.post('delshop',{img:img,size:size}).then(result=>{\r\n                                    i--\r\n                                    if(i==0){\r\n                                        this.getshop()   \r\n                                        Toast(result.body)\r\n                                        this.allclass=\"\";\r\n                                        this.sum=[]\r\n                                    }\r\n                                }) \r\n                            }\r\n                        }\r\n                     }).catch(err => { \r\n                         if (err == 'cancel') {\r\n\r\n                         } \r\n                     });\r\n                }else{\r\n                    Toast(\"请选择要删除的商品\")\r\n                }\r\n            },\r\n            back(){\r\n                this.$router.back(-1)\r\n            },\r\n            add(i){\r\n                if(this.shop[i].count<999){\r\n                    this.shop[i].count++\r\n                    var img=this.shop[i].img;\r\n                    var size=this.shop[i].size;\r\n                    var count=this.shop[i].count;\r\n                    this.sum.sort()\r\n                    this.$http.post('shopadd',{img:img,size:size,count:count}).then(result=>{\r\n                        console.log(result.body)\r\n                    })\r\n                }   \r\n            },\r\n            minus(i){\r\n                if(this.shop[i].count>1){\r\n                    this.shop[i].count--\r\n                    var img=this.shop[i].img;\r\n                    var size=this.shop[i].size;\r\n                    var count=this.shop[i].count;\r\n                    this.sum.sort()\r\n                    this.$http.post('shopadd',{img:img,size:size,count:count}).then(result=>{\r\n                        console.log(result.body)\r\n                    })\r\n                }\r\n            },\r\n            all(){\r\n                if(this.shop.length==0){\r\n                    Toast(\"没有可选的商品\")\r\n                }else if(this.sum.length!==this.shop.length){\r\n                    this.sum=[]\r\n                    for(var key in this.shop){\r\n                        this.sum.push(this.shop[key])\r\n                    }\r\n                    this.allclass=\"all\";\r\n                }else{\r\n                    this.sum=[]\r\n                    this.allclass=\"\";\r\n                }\r\n            },\r\n            getshop(){\r\n                this.$http.get(\"shopcart\").then(result=>{\r\n                    this.shop=result.body;\r\n                    console.log(this.shop)\r\n                })\r\n            }\r\n        },\r\n        created(){\r\n            this.getshop();\r\n        },\r\n        watch:{\r\n            payr(newval,oldval){\r\n                for(var i=0;i<this.paya.length;i++){\r\n                    if(newval==this.paya[i]){\r\n                        this.payr=this.paya[i]\r\n                        console.log(this.payr)\r\n                    }\r\n                }\r\n            },\r\n            sum(){\r\n                this.he=0\r\n                for(var key in this.sum){\r\n                    this.he+=parseInt(this.sum[key].price*this.sum[key].count)\r\n                }\r\n                if(this.sum.length!==this.shop.length){\r\n                    this.allclass=\"\";\r\n                }else{\r\n                    this.allclass=\"all\";\r\n                }\r\n            },\r\n        }\r\n    });\r\n</script>\r\n<style>\r\n    .mui-icon-redo:before{\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        color: #333;\r\n    }\r\n    .mint-radiolist-title{\r\n        font-size: 15px;\r\n    }\r\n    .my-shopcart .mint-button{\r\n        border-radius: 0;\r\n    }\r\n    .my-shopcart .mui-table-view-cell{\r\n        padding: 0 10px 0 0;\r\n    }\r\n    .my-shopcart .mui-table-view .mui-media-object{\r\n        max-width: 100px;\r\n        height: 90px;\r\n    }\r\n    .my-shopcart .mui-input-group .mui-input-row{\r\n        height:auto;\r\n    }\r\n    .my-shopcart .mui-checkbox input[type='checkbox']:before{\r\n        line-height:112px;\r\n    }\r\n    .all{\r\n        opacity:0.8;\r\n    }\r\n    .my-shopcart .bl{\r\n        background:#333;\r\n    }\r\n    .my-shopcart .mint-tabbar > .mint-tab-item.is-selected{\r\n        color:#fff;\r\n        background:#333;\r\n    }\r\n    .my-shopcart .mint-header{\r\n        background: #fff;\r\n        height:45px;\r\n    }\r\n    .my-shopcart .mint-header-button > a , .my-shopcart .mintui-back:before{\r\n        font-size:28px;\r\n        color:#ddd;\r\n    }\r\n    .my-shopcart .mint-header-title{\r\n        color:#000;\r\n        font-size:15px;\r\n    }\r\n    .null{\r\n        position:absolute;\r\n        top:0;\r\n        left:0;\r\n        right:0;\r\n        bottom:0;\r\n        margin:auto;\r\n        display: block;\r\n    }\r\n    .mint-popup w-100 mint-popup-bottom{\r\n        z-index:1100;\r\n    }\r\n</style>"]}]}