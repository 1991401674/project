{"remainingRequest":"C:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\我的项目\\X project\\src\\components\\shop\\shopcart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\我的项目\\X project\\src\\components\\shop\\shopcart.vue","mtime":1542966867638},{"path":"C:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\web\\Desktop\\我的项目\\X project\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { MessageBox } from 'mint-ui';\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      check: true,\n      cart: \"null\",\n      allclass: \"\",\n      nh: \"have\",\n      shop: [],\n      sum: [],\n      he: 0,\n      popupVisible: false,\n      paya: [\"支付宝\", \"微信\", \"银行卡\"],\n      payr: \"支付宝\"\n    };\n  },\n  methods: {\n    payM: function payM() {\n      var _this = this;\n\n      var i = this.sum.length;\n\n      if (i > 0) {\n        MessageBox.confirm('', {\n          message: '你确定要支付？',\n          title: '提示',\n          confirmButtonText: '确定',\n          cancelButtonText: '取消'\n        }).then(function (action) {\n          if (action == 'confirm') {\n            MessageBox.prompt('请输入支付密码！', {\n              inputValidator: function inputValidator(val) {\n                if (val === null) {\n                  return true;\n                }\n\n                return !(val.length < 6 || val.length > 18);\n              },\n              inputErrorMessage: '密码长度必须在6~18位'\n            }).then(function (_ref) {\n              var value = _ref.value,\n                  action = _ref.action;\n              Toast(\"支付成功\");\n\n              for (var key in _this.sum) {\n                var img = _this.sum[key].img;\n                var size = _this.sum[key].size;\n\n                _this.$http.post('delshop', {\n                  img: img,\n                  size: size\n                }).then(function (result) {\n                  i--;\n\n                  if (i == 0) {\n                    _this.popupVisible = false;\n\n                    _this.getshop();\n\n                    _this.allclass = \"\";\n                    _this.sum = [];\n                  }\n                });\n              }\n            }).catch(function (err) {\n              if (err == 'cancel') {\n                _this.popupVisible = false;\n              }\n            });\n          }\n        }).catch(function (err) {\n          if (err == 'cancel') {\n            _this.popupVisible = false;\n            Toast(\"取消支付\");\n          }\n        });\n      }\n    },\n    shopinfo: function shopinfo(cid) {\n      this.$router.push('/index/shoplists/shopinfo?id=' + cid);\n    },\n    pay: function pay() {\n      if (this.he > 0) {\n        this.popupVisible = true;\n      } else {\n        Toast(\"请选择购买商品\");\n      }\n    },\n    delblo: function delblo() {\n      var _this2 = this;\n\n      var i = this.sum.length;\n\n      if (i > 0) {\n        MessageBox.confirm('', {\n          message: '你确定要删除？',\n          title: '提示',\n          confirmButtonText: '确定',\n          cancelButtonText: '取消'\n        }).then(function (action) {\n          if (action == 'confirm') {\n            for (var key in _this2.sum) {\n              var img = _this2.sum[key].img;\n              var size = _this2.sum[key].size;\n\n              _this2.$http.post('delshop', {\n                img: img,\n                size: size\n              }).then(function (result) {\n                i--;\n\n                if (i == 0) {\n                  _this2.getshop();\n\n                  Toast(result.body);\n                  _this2.allclass = \"\";\n                  _this2.sum = [];\n                }\n              });\n            }\n          }\n        }).catch(function (err) {\n          if (err == 'cancel') {}\n        });\n      } else {\n        Toast(\"请选择要删除的商品\");\n      }\n    },\n    back: function back() {\n      this.$router.back(-1);\n    },\n    add: function add(i) {\n      if (this.shop[i].count < 999) {\n        this.shop[i].count++;\n        var img = this.shop[i].img;\n        var size = this.shop[i].size;\n        var count = this.shop[i].count;\n        this.sum.sort();\n        this.$http.post('shopadd', {\n          img: img,\n          size: size,\n          count: count\n        }).then(function (result) {\n          console.log(result.body);\n        });\n      }\n    },\n    minus: function minus(i) {\n      if (this.shop[i].count > 1) {\n        this.shop[i].count--;\n        var img = this.shop[i].img;\n        var size = this.shop[i].size;\n        var count = this.shop[i].count;\n        this.sum.sort();\n        this.$http.post('shopadd', {\n          img: img,\n          size: size,\n          count: count\n        }).then(function (result) {\n          console.log(result.body);\n        });\n      }\n    },\n    all: function all() {\n      if (this.shop.length == 0) {\n        Toast(\"没有可选的商品\");\n      } else if (this.sum.length !== this.shop.length) {\n        this.sum = [];\n\n        for (var key in this.shop) {\n          this.sum.push(this.shop[key]);\n        }\n\n        this.allclass = \"all\";\n      } else {\n        this.sum = [];\n        this.allclass = \"\";\n      }\n    },\n    getshop: function getshop() {\n      var _this3 = this;\n\n      this.$http.get(\"shopcart\").then(function (result) {\n        _this3.shop = result.body;\n        console.log(_this3.shop);\n      });\n    },\n    getlogin: function getlogin() {\n      if (sessionStorage.length > 0) {\n        this.$router.push(\"/index/shopcart\");\n      } else {\n        this.$router.push(\"/login\");\n      }\n    }\n  },\n  created: function created() {\n    this.getshop();\n    this.getlogin();\n  },\n  watch: {\n    payr: function payr(newval, oldval) {\n      for (var i = 0; i < this.paya.length; i++) {\n        if (newval == this.paya[i]) {\n          this.payr = this.paya[i];\n          console.log(this.payr);\n        }\n      }\n    },\n    sum: function sum() {\n      this.he = 0;\n\n      for (var key in this.sum) {\n        this.he += parseInt(this.sum[key].price * this.sum[key].count);\n      }\n\n      if (this.sum.length !== this.shop.length) {\n        this.allclass = \"\";\n      } else {\n        this.allclass = \"all\";\n      }\n    }\n  }\n};",{"version":3,"sources":["shopcart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"my-shopcart\">\r\n        <mt-header title=\"购物车\" fixed>\r\n            <a @click.stop=\"back()\" slot=\"left\">\r\n                <mt-button icon=\"back\"></mt-button>\r\n            </a>\r\n            <a @click.stop=\"delblo()\" class=\"mui-icon mui-icon-trash\" slot=\"right\"></a>\r\n        </mt-header>\r\n        <div class=\"mui-card\">\r\n            <form class=\"mui-input-group\">\r\n                <div class=\"mui-input-row mui-checkbox mui-left\" v-for=\"(item,i) in shop\" :key=\"item.id\">\r\n                    <a class=\"mui-icon mui-icon-redo\" @click.stop=\"shopinfo(item.cid)\"></a>\r\n                    <label>\r\n                        <input name=\"checkbox\" :value=\"item\" v-model=\"sum\" type=\"checkbox\">\r\n                        <ul class=\"mui-table-view\">\r\n                            <li class=\"mui-table-view-cell mui-media\">\r\n                                <img class=\"mui-media-object mui-pull-left\" :src=\"item.img\">\r\n                                <div class=\"mui-media-body\">\r\n                                    <div style=\"margin-bottom:5px; overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;\">\r\n                                    {{item.title}}</div>\r\n                                    <p class=\"d-flex\" style=\"justify-content:space-between; margin-bottom:5px;\">\r\n                                        <b style=\"color:red;\">￥{{item.price.toFixed(2)}}</b>\r\n                                        <span>{{item.color}}</span>\r\n                                        <span>{{item.size}}</span>\r\n                                    </p>\r\n                                    <div class=\"mui-numbox w-100\" style=\"margin:0;\">\r\n                                        <button class=\"mui-btn mui-btn-numbox-minus\" type=\"button\" @click=\"minus(i)\">-</button>\r\n                                        <input class=\"mui-input-numbox\" type=\"number\" v-model=\"item.count\" disabled/>\r\n                                        <button class=\"mui-btn mui-btn-numbox-plus\" type=\"button\" @click=\"add(i)\">+</button>\r\n                                    </div>\r\n                                </div>\r\n\t\t\t\t            </li>\r\n                        </ul>\r\n                    </label> \r\n                </div>         \r\n            </form>\r\n        </div>\r\n        <img src=\"http://127.0.0.1:1674/img/shopcart/shopCart_null.png\" v-if=\"this.shop.length==0\" class=\"w-50 null\"/>\r\n        <mt-tabbar fixed style=\"height:50px;\">\r\n            <mt-button @click=\"all()\" :class=\"allclass\" class=\"mui-col-xs-4 mui-col-sm-4 h-100\" style=\"background: #333; color:#fff; line-height: 50px; font-size:large;\">\r\n                全选\r\n            </mt-button>\r\n            <div class=\"mui-col-xs-4 mui-col-sm-4\" style=\"background: #333; color:#fff; line-height: 50px; font-size:80%;\">\r\n                共计：<b>￥{{he.toFixed(2)}}</b>\r\n            </div>\r\n            <div @click=\"pay()\" class=\"mui-col-xs-4 mui-col-sm-4\" style=\"background: red; color:#fff; line-height: 50px; font-size:large;\">\r\n                <b>结 算</b>\r\n            </div>\r\n            <mt-popup v-model=\"popupVisible\" position=\"bottom\" class=\"w-100\">\r\n                <div style=\"background:#fff; padding:10px;\" class=\"w-100\">\r\n                    支付￥{{he.toFixed(2)}}元\r\n                </div>\r\n                <mt-radio title=\"请选择支付方式\"\r\n                :options=paya v-model=\"payr\" style=\"text-align:left;\">\r\n                </mt-radio>\r\n                <mt-button size=\"large\" style=\"background:#00FF00; color:#fff;\" @click=\"payM()\">\r\n                    <b>支 付</b>\r\n                </mt-button>\r\n            </mt-popup>\r\n        </mt-tabbar>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { MessageBox } from 'mint-ui'\r\n    import {Toast} from \"mint-ui\"\r\n    export default({\r\n        data(){\r\n            return {\r\n                check:true,\r\n                cart:\"null\",\r\n                allclass:\"\",\r\n                nh:\"have\",\r\n                shop:[],\r\n                sum:[],\r\n                he:0,\r\n                popupVisible:false,\r\n                paya:[\"支付宝\",\"微信\",\"银行卡\"],\r\n                payr:\"支付宝\"\r\n            }\r\n        },\r\n        methods:{\r\n            payM(){\r\n                var i=this.sum.length\r\n                 if(i>0){\r\n                     MessageBox.confirm('', {message: '你确定要支付？',title: '提示', confirmButtonText: '确定', cancelButtonText: '取消'}).then(action => { \r\n                         if (action == 'confirm') {\r\n                            MessageBox.prompt('请输入支付密码！',{inputValidator: (val) => {\r\n                                if (val === null) {\r\n                                return true;\r\n                                }\r\n                                return !(val.length < 6 || val.length > 18)\r\n                                }, inputErrorMessage: '密码长度必须在6~18位'\r\n                                }).then(({ value, action }) => {\r\n                                Toast(\"支付成功\")\r\n                                for(var key in this.sum){\r\n                                    var img=this.sum[key].img\r\n                                    var size=this.sum[key].size\r\n                                    this.$http.post('delshop',{img:img,size:size}).then(result=>{\r\n                                        i--\r\n                                        if(i==0){\r\n                                            this.popupVisible=false;\r\n                                            this.getshop()\r\n                                            this.allclass=\"\";\r\n                                            this.sum=[]\r\n                                        }\r\n                                    }) \r\n                                }\r\n                            }).catch(err => { \r\n                                 if (err == 'cancel') {\r\n                                    this.popupVisible=false;\r\n                                 } \r\n                            });\r\n                        }\r\n                     }).catch(err => { \r\n                         if (err == 'cancel') {\r\n                             this.popupVisible=false;\r\n                             Toast(\"取消支付\")\r\n                         } \r\n                     });\r\n                 }\r\n            },\r\n            shopinfo(cid){\r\n                this.$router.push('/index/shoplists/shopinfo?id='+cid)\r\n            },\r\n            pay(){\r\n                if(this.he>0){\r\n                    this.popupVisible=true\r\n                }else{\r\n                    Toast(\"请选择购买商品\")\r\n                }\r\n            },\r\n            delblo(){\r\n                 var i=this.sum.length\r\n                 if(i>0){\r\n                     MessageBox.confirm('', {message: '你确定要删除？',title: '提示', confirmButtonText: '确定', cancelButtonText: '取消'}).then(action => { \r\n                         if (action == 'confirm') {\r\n                            for(var key in this.sum){\r\n                                var img=this.sum[key].img\r\n                                var size=this.sum[key].size\r\n                                this.$http.post('delshop',{img:img,size:size}).then(result=>{\r\n                                    i--\r\n                                    if(i==0){\r\n                                        this.getshop()   \r\n                                        Toast(result.body)\r\n                                        this.allclass=\"\";\r\n                                        this.sum=[]\r\n                                    }\r\n                                }) \r\n                            }\r\n                        }\r\n                     }).catch(err => { \r\n                         if (err == 'cancel') {\r\n\r\n                         } \r\n                     });\r\n                }else{\r\n                    Toast(\"请选择要删除的商品\")\r\n                }\r\n            },\r\n            back(){\r\n                this.$router.back(-1)\r\n            },\r\n            add(i){\r\n                if(this.shop[i].count<999){\r\n                    this.shop[i].count++\r\n                    var img=this.shop[i].img;\r\n                    var size=this.shop[i].size;\r\n                    var count=this.shop[i].count;\r\n                    this.sum.sort()\r\n                    this.$http.post('shopadd',{img:img,size:size,count:count}).then(result=>{\r\n                        console.log(result.body)\r\n                    })\r\n                }   \r\n            },\r\n            minus(i){\r\n                if(this.shop[i].count>1){\r\n                    this.shop[i].count--\r\n                    var img=this.shop[i].img;\r\n                    var size=this.shop[i].size;\r\n                    var count=this.shop[i].count;\r\n                    this.sum.sort()\r\n                    this.$http.post('shopadd',{img:img,size:size,count:count}).then(result=>{\r\n                        console.log(result.body)\r\n                    })\r\n                }\r\n            },\r\n            all(){\r\n                if(this.shop.length==0){\r\n                    Toast(\"没有可选的商品\")\r\n                }else if(this.sum.length!==this.shop.length){\r\n                    this.sum=[]\r\n                    for(var key in this.shop){\r\n                        this.sum.push(this.shop[key])\r\n                    }\r\n                    this.allclass=\"all\";\r\n                }else{\r\n                    this.sum=[]\r\n                    this.allclass=\"\";\r\n                }\r\n            },\r\n            getshop(){\r\n                this.$http.get(\"shopcart\").then(result=>{\r\n                    this.shop=result.body;\r\n                    console.log(this.shop)\r\n                })\r\n            },\r\n            getlogin(){\r\n                if(sessionStorage.length>0){\r\n                    this.$router.push(\"/index/shopcart\")\r\n                }else{\r\n                    this.$router.push(\"/login\")\r\n                }\r\n            }\r\n        },\r\n        created(){\r\n            this.getshop();\r\n            this.getlogin();\r\n        },\r\n        watch:{\r\n            payr(newval,oldval){\r\n                for(var i=0;i<this.paya.length;i++){\r\n                    if(newval==this.paya[i]){\r\n                        this.payr=this.paya[i]\r\n                        console.log(this.payr)\r\n                    }\r\n                }\r\n            },\r\n            sum(){\r\n                this.he=0\r\n                for(var key in this.sum){\r\n                    this.he+=parseInt(this.sum[key].price*this.sum[key].count)\r\n                }\r\n                if(this.sum.length!==this.shop.length){\r\n                    this.allclass=\"\";\r\n                }else{\r\n                    this.allclass=\"all\";\r\n                }\r\n            },\r\n        }\r\n    });\r\n</script>\r\n<style>\r\n    .mui-icon-redo:before{\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        color: #333;\r\n    }\r\n    .mint-radiolist-title{\r\n        font-size: 15px;\r\n    }\r\n    .my-shopcart .mint-button{\r\n        border-radius: 0;\r\n    }\r\n    .my-shopcart .mui-table-view-cell{\r\n        padding: 0 10px 0 0;\r\n    }\r\n    .my-shopcart .mui-table-view .mui-media-object{\r\n        max-width: 100px;\r\n        height: 90px;\r\n    }\r\n    .my-shopcart .mui-input-group .mui-input-row{\r\n        height:auto;\r\n    }\r\n    .my-shopcart .mui-checkbox input[type='checkbox']:before{\r\n        line-height:112px;\r\n    }\r\n    .all{\r\n        opacity:0.8;\r\n    }\r\n    .my-shopcart .bl{\r\n        background:#333;\r\n    }\r\n    .my-shopcart .mint-tabbar > .mint-tab-item.is-selected{\r\n        color:#fff;\r\n        background:#333;\r\n    }\r\n    .my-shopcart .mint-header{\r\n        background: #fff;\r\n        height:45px;\r\n    }\r\n    .my-shopcart .mint-header-button > a , .my-shopcart .mintui-back:before{\r\n        font-size:28px;\r\n        color:#ddd;\r\n    }\r\n    .my-shopcart .mint-header-title{\r\n        color:#000;\r\n        font-size:15px;\r\n    }\r\n    .null{\r\n        position:absolute;\r\n        top:0;\r\n        left:0;\r\n        right:0;\r\n        bottom:0;\r\n        margin:auto;\r\n        display: block;\r\n    }\r\n    .mint-popup w-100 mint-popup-bottom{\r\n        z-index:1100;\r\n    }\r\n</style>"],"sourceRoot":"src\\components\\shop"}]}